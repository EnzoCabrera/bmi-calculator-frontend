@if(loading) {
<div class="loading-spinner">
    <p-progressSpinner
        styleClass="w-4rem h-4rem z-5"
        strokeWidth="4"
        animationDuration=".5s"
    />
</div>
}

<div
    class="surface-ground flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden"
>
    <div
        class="container flex flex-column align-items-center justify-content-center p-3"
    >
        <img
            src="assets/layout/images/logo.svg"
            alt="BMI Fit logo"
            class="mb-5 w-10rem flex-shrink-0"
        />

        <div class="w-full surface-card py-4 px-5 sm:px-5 border-round">
            <div class="text-center mb-5">
                <div class="text-900 text-3xl font-semibold mb-3">Entrar</div>
            </div>

            <form [formGroup]="loginForm" (ngSubmit)="login()" novalidate>
                <div class="field mb-4">
                    <label
                        for="email"
                        class="block text-900 text-xl font-medium mb-2"
                        >Email</label
                    >
                    <input
                        data-testid="inputEmail-loginForm"
                        formControlName="email"
                        type="email"
                        id="email"
                        placeholder="Seu e-mail"
                        aria-describedby="email-error"
                        pInputText
                        class="w-full"
                        style="padding: 1rem"
                        required
                    />

                    @if (loginForm.get('email').invalid &&
                    (loginForm.get('email').dirty ||
                    loginForm.get('email').touched) ) {
                    <small class="text-red-500 mt-2 block" id="email-error">{{
                        getErrorMessage("email")
                    }}</small>
                    }
                </div>

                <div class="field mb-4">
                    <label
                        for="password"
                        class="block text-900 font-medium text-xl mb-2"
                        >Senha</label
                    >
                    <p-password
                        data-testid="inputPassword-loginForm"
                        formControlName="password"
                        id="password"
                        placeholder="Sua senha"
                        class="w-full"
                        [toggleMask]="true"
                        [feedback]="false"
                        required
                    ></p-password>

                    @if (loginForm.get('password').invalid &&
                    (loginForm.get('password').dirty ||
                    loginForm.get('password').touched) ) {
                    <small
                        class="text-red-500 mt-2 block"
                        id="password-error"
                        >{{ getErrorMessage("password") }}</small
                    >
                    }
                </div>

                <p-messages />

                <button
                    data-testid="submitButton-loginForm"
                    pButton
                    pRipple
                    label="Entrar"
                    class="w-full p-3 text-xl"
                    [disabled]="!loginForm.valid"
                    type="submit"
                ></button>
            </form>

            <p class="mt-3 text-center">
                NÃ£o tem uma conta?
                <a
                    class="font-bold no-underline cursor-pointer"
                    routerLink="../signup"
                    >Cadastre-se</a
                >
            </p>
        </div>
    </div>
</div>
