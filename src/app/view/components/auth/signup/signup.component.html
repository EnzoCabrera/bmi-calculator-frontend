@if(loading) {
<p-progressSpinner
    styleClass="w-4rem h-4rem z-5"
    style="
        position: absolute;
        top: 50%;
        left: 50%;
        z-index: 5;
        transform: translate(-50%, -50%);
    "
    strokeWidth="4"
    animationDuration=".5s"
/>
}

<div
    class="surface-ground flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden"
>
    <div
        class="container flex flex-column align-items-center justify-content-center p-3"
    >
        <img
            src="assets/layout/images/logo.svg"
            alt="BMI Fit logo"
            class="mb-5 w-10rem flex-shrink-0"
        />

        <div class="w-full surface-card py-4 px-5 sm:px-5 border-round">
            <div class="text-center mb-5">
                <div class="text-900 text-3xl font-semibold mb-3">
                    Cadastrar
                </div>
            </div>

            <form [formGroup]="signupForm" (ngSubmit)="signup()" novalidate>
                <div class="field mb-4">
                    <label
                        for="fullName"
                        class="block text-900 text-xl font-medium mb-2"
                        >Nome</label
                    >
                    <input
                        formControlName="fullName"
                        type="text"
                        id="fullName"
                        placeholder="Seu nome completo"
                        aria-describedby="fullName-error"
                        pInputText
                        class="w-full"
                        style="padding: 1rem"
                        required
                    />

                    @if (signupForm.get('fullName').invalid &&
                    (signupForm.get('fullName').dirty ||
                    signupForm.get('fullName').touched) ) {
                    <small
                        class="text-red-500 mt-2 block"
                        id="fullName-error"
                        >{{ getErrorMessage("fullName") }}</small
                    >
                    }
                </div>

                <div class="field mb-4">
                    <label
                        for="email"
                        class="block text-900 text-xl font-medium mb-2"
                        >Email</label
                    >
                    <input
                        formControlName="email"
                        type="email"
                        id="email"
                        placeholder="Seu e-mail"
                        aria-describedby="email-error"
                        pInputText
                        class="w-full"
                        style="padding: 1rem"
                        required
                    />

                    @if (signupForm.get('email').invalid &&
                    (signupForm.get('email').dirty ||
                    signupForm.get('email').touched) ) {
                    <small class="text-red-500 mt-2 block" id="email-error">{{
                        getErrorMessage("email")
                    }}</small>
                    }
                </div>

                <div class="field mb-4">
                    <label
                        for="password"
                        class="block text-900 font-medium text-xl mb-2"
                        >Senha</label
                    >
                    <p-password
                        formControlName="password"
                        id="password"
                        placeholder="Sua senha"
                        class="w-full"
                        [toggleMask]="true"
                        [feedback]="false"
                        required
                    ></p-password>

                    @if (signupForm.get('password').invalid &&
                    (signupForm.get('password').dirty ||
                    signupForm.get('password').touched) ) {
                    <small
                        class="text-red-500 mt-2 block"
                        id="password-error"
                        >{{ getErrorMessage("password") }}</small
                    >
                    }
                </div>

                <div class="field mb-4">
                    <label
                        for="passwordConfirmation"
                        class="block text-900 font-medium text-xl mb-2"
                        >Confirmar senha</label
                    >
                    <p-password
                        formControlName="passwordConfirmation"
                        id="passwordConfirmation"
                        placeholder="Confirme sua senha"
                        class="w-full"
                        [toggleMask]="true"
                        [feedback]="false"
                        required
                    ></p-password>

                    @if (signupForm.errors?.['matchPassword'] &&
                    signupForm.get('passwordConfirmation').touched ) {
                    <small
                        class="text-red-500 mt-2 block"
                        id="confirmPassword-error"
                        >{{ getErrorMessage("passwordConfirmation") }}</small
                    >
                    }
                </div>

                <p-toast position="center"/>

                <button
                    pButton
                    pRipple
                    label="Cadastrar"
                    class="w-full p-3 text-xl"
                    [disabled]="signupForm.invalid"
                    type="submit"
                ></button>
            </form>

            <p class="mt-3 text-center">
                Já tem uma conta?
                <a
                    class="font-bold no-underline cursor-pointer"
                    routerLink="../login"
                    >Faça login</a
                >
            </p>
        </div>
    </div>
</div>
