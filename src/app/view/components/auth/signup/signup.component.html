@if(loading) {
<div class="loading-spinner">
    <p-progressSpinner
        styleClass="w-4rem h-4rem z-5"
        strokeWidth="4"
        animationDuration=".5s"
    />
</div>
}

<p-dialog
    header="Termos e Condições de Uso"
    [modal]="true"
    [(visible)]="visible"
    [style]="{ width: '50rem' }"
    [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
>
    <ol>
        <li class="font-bold">Aceitação dos Termos</li>
        <p>
            Ao criar uma conta e utilizar os serviços do nosso aplicativo, o
            usuário concorda integralmente com os presentes Termos e Condições
            de Uso. Caso não concorde com qualquer parte, o acesso ao aplicativo
            deve ser imediatamente interrompido.
        </p>

        <li class="font-bold">Objetivo do Aplicativo</li>
        <p>
            O aplicativo tem como finalidade oferecer orientações personalizadas
            de dieta e rotina de treinos, com base em informações fornecidas
            pelo próprio usuário, como o Índice de Massa Corporal (IMC) e
            disponibilidade de tempo.
        </p>

        <li class="font-bold">Cadastro e Segurança da Conta</li>
        <ul>
            <li>
                O usuário é responsável por fornecer informações verídicas e
                manter a confidencialidade de suas credenciais de acesso.
            </li>
            <li>
                A desenvolvedora não se responsabiliza pela quebra da
                confidencialidade de suas credenciais de acesso por parte do
                usuario
            </li>
            <li>É proibido compartilhar contas com terceiros.</li>
            <li>
                Caso haja suspeita de uso indevido, a conta poderá ser suspensa
                temporariamente ou permanentemente.
            </li>
        </ul>

        <li class="font-bold">Privacidade e Proteção de Dados</li>
        <ul>
            <li>
                As informações fornecidas serão armazenadas de forma segura e
                utilizadas exclusivamente para personalização dos serviços do
                aplicativo.
            </li>
            <li>
                A empresa adota medidas técnicas e administrativas para proteger
                os dados contra acessos não autorizados, vazamentos ou qualquer
                forma de tratamento inadequado.
            </li>
        </ul>

        <li class="font-bold">Coleta de Dados Sensíveis</li>
        <p>
            O usuário autoriza expressamente a coleta e o tratamento de dados
            considerados sensíveis, como informações relacionadas à saúde e ao
            IMC, exclusivamente para fins de personalização dos serviços
            oferecidos. Tais dados serão protegidos conforme legislação vigente.
        </p>

        <li class="font-bold">Direitos do Usuário (LGPD)</li>
        <p>
            O usuário tem o direito de acessar, corrigir, excluir ou solicitar a
            portabilidade e alteração de seus dados pessoais. Também poderá
            revogar o consentimento a qualquer momento, sem prejuízo da
            legalidade do tratamento realizado anteriormente.
        </p>

        <li class="font-bold">Política de Privacidade</li>
        <p>
            A presente Política de Privacidade descreve como os dados dos
            usuários são coletados, usados e protegidos:
        </p>
        <ul>
            <li>
                <strong>Coleta:</strong> Coletamos apenas os dados necessários
                para o funcionamento adequado do aplicativo, incluindo nome,
                e-mail, IMC, idade e tempo disponível para atividades.
            </li>
            <li>
                <strong>Uso:</strong> Os dados são utilizados exclusivamente
                para oferecer rotinas e dietas personalizadas, notificações e
                melhorias no serviço.
            </li>
            <li>
                <strong>Armazenamento:</strong> As informações são armazenadas
                em servidores seguros com acesso restrito.
            </li>
            <li>
                <strong>Compartilhamento:</strong> Nenhum dado é vendido ou
                compartilhado com terceiros, exceto quando exigido por lei ou
                mediante autorização expressa do usuário.
            </li>
            <li>
                <strong>Cookies:</strong> O aplicativo pode usar cookies ou
                tecnologias similares para melhorar a experiência do usuário.
            </li>
            <li>
                <strong>Direitos:</strong> O usuário pode, a qualquer momento,
                solicitar a exclusão ou exportação de seus dados.
            </li>
        </ul>

        <li class="font-bold">Responsabilidades do Usuário</li>
        <ul>
            <li>
                O usuário declara que está em boas condições de saúde para
                realizar atividades físicas.
            </li>
            <li>
                É recomendável consultar um médico ou nutricionista antes de
                iniciar qualquer dieta ou rotina de exercícios.
            </li>
            <li>
                O uso do aplicativo é de responsabilidade exclusiva do usuário.
            </li>
        </ul>

        <li class="font-bold">Limitação de Responsabilidade</li>
        <p>
            As sugestões fornecidas pelo aplicativo não substituem orientação
            médica ou profissional especializada. A empresa não se
            responsabiliza por quaisquer danos, diretos ou indiretos,
            decorrentes do uso inadequado das orientações fornecidas.
        </p>

        <li class="font-bold">Propriedade Intelectual</li>
        <p>
            Todo o conteúdo do aplicativo, incluindo textos, imagens, algoritmos
            e funcionalidades, é protegido por direitos autorais e de
            propriedade intelectual. É proibida a reprodução ou distribuição sem
            autorização prévia por escrito.
        </p>

        <li class="font-bold">Licença de Uso</li>
        <p>
            O aplicativo é disponibilizado ao usuário sob uma licença pessoal,
            limitada, intransferível e não exclusiva, apenas para fins não
            comerciais e em conformidade com estes Termos.
        </p>

        <li class="font-bold">Modificações nos Termos</li>
        <p>
            A empresa poderá, a qualquer momento, atualizar estes termos. O
            usuário será notificado e deverá aceitar os novos termos para
            continuar utilizando o aplicativo.
        </p>

        <li class="font-bold">Cancelamento e Exclusão de Conta</li>
        <p>
            O usuário pode solicitar a exclusão de sua conta e dados pessoais a
            qualquer momento por meio da área de suporte do aplicativo.
        </p>

        <li class="font-bold">Foro e Legislação Aplicável</li>
        <p>
            Estes Termos são regidos pelas leis do país onde a empresa está
            sediada. Fica eleito o foro da comarca da cidade de
            <strong>Uberlândia</strong> para dirimir eventuais conflitos.
        </p>

        <p>
            <strong
                >Ao continuar, você declara que leu, compreendeu e concorda com
                os Termos e Condições de Uso.</strong
            >
        </p>
    </ol>
</p-dialog>

<div
    class="surface-ground flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden"
>
    <div
        class="container flex flex-column align-items-center justify-content-center p-3"
    >
        <img
            src="assets/layout/images/logo.svg"
            alt="BMI Fit logo"
            class="mb-5 w-10rem flex-shrink-0"
        />

        <div class="w-full surface-card py-4 px-5 sm:px-5 border-round">
            <div class="text-center mb-5">
                <div class="text-900 text-3xl font-semibold mb-3">
                    Cadastrar
                </div>
            </div>

            <form [formGroup]="signupForm" (ngSubmit)="signup()" novalidate>
                <div class="field mb-4">
                    <label
                        for="fullName"
                        class="block text-900 text-xl font-medium mb-2"
                        >Nome</label
                    >
                    <input
                        data-testid="inputFullName-signupForm"
                        formControlName="fullName"
                        type="text"
                        id="fullName"
                        placeholder="Seu nome completo"
                        aria-describedby="fullName-error"
                        pInputText
                        class="w-full"
                        style="padding: 1rem"
                        required
                    />

                    @if (signupForm.get('fullName').invalid &&
                    (signupForm.get('fullName').dirty ||
                    signupForm.get('fullName').touched) ) {
                    <small
                        class="text-red-500 mt-2 block"
                        id="fullName-error"
                        >{{ getErrorMessage("fullName") }}</small
                    >
                    }
                </div>

                <div class="field mb-4">
                    <label
                        for="email"
                        class="block text-900 text-xl font-medium mb-2"
                        >Email</label
                    >
                    <input
                        data-testid="inputEmail-signupForm"
                        formControlName="email"
                        type="email"
                        id="email"
                        placeholder="Seu e-mail"
                        aria-describedby="email-error"
                        pInputText
                        class="w-full"
                        style="padding: 1rem"
                        required
                    />

                    @if (signupForm.get('email').invalid &&
                    (signupForm.get('email').dirty ||
                    signupForm.get('email').touched) ) {
                    <small class="text-red-500 mt-2 block" id="email-error">{{
                        getErrorMessage("email")
                    }}</small>
                    }
                </div>

                <div class="field mb-4">
                    <label
                        for="password"
                        class="block text-900 font-medium text-xl mb-2"
                        >Senha</label
                    >
                    <p-password
                        data-testid="inputPassword-signupForm"
                        formControlName="password"
                        id="password"
                        placeholder="Sua senha"
                        class="w-full"
                        [toggleMask]="true"
                        [feedback]="false"
                        required
                    ></p-password>

                    @if (signupForm.get('password').invalid &&
                    (signupForm.get('password').dirty ||
                    signupForm.get('password').touched) ) {
                    <small
                        class="text-red-500 mt-2 block"
                        id="password-error"
                        >{{ getErrorMessage("password") }}</small
                    >
                    }
                </div>

                <div class="field mb-4">
                    <label
                        for="passwordConfirmation"
                        class="block text-900 font-medium text-xl mb-2"
                        >Confirmar senha</label
                    >
                    <p-password
                        data-testid="inputPasswordConfirmation-signupForm"
                        formControlName="passwordConfirmation"
                        id="passwordConfirmation"
                        placeholder="Confirme sua senha"
                        class="w-full"
                        [toggleMask]="true"
                        [feedback]="false"
                        required
                    ></p-password>

                    @if (signupForm.errors?.['matchPassword'] &&
                    signupForm.get('passwordConfirmation').touched ) {
                    <small
                        class="text-red-500 mt-2 block"
                        id="confirmPassword-error"
                        >{{ getErrorMessage("passwordConfirmation") }}</small
                    >
                    }
                </div>

                <div class="flex align-items-center mb-4">
                    <p-checkbox
                        formControlName="agreement"
                        binary="true"
                        inputId="agreement"
                    />
                    <label for="agreement" class="ml-2 flex align-items-center"
                        >Li e aceito os

                        <p-button
                            class="ml-1"
                            label="Termos de uso"
                            (onClick)="showTerms()"
                            [link]="true"
                        />
                    </label>
                </div>

                <p-toast position="center" />

                <button
                    data-testid="submitButton-signupForm"
                    pButton
                    pRipple
                    label="Cadastrar"
                    class="w-full p-3 text-xl"
                    [disabled]="!signupForm.valid"
                    type="submit"
                ></button>
            </form>

            <p class="mt-3 text-center">
                Já tem uma conta?
                <a
                    class="font-bold no-underline cursor-pointer"
                    routerLink="../login"
                    >Faça login</a
                >
            </p>
        </div>
    </div>
</div>
